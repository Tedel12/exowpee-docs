## Available Events

| Event | Description | Payload |
|-------|-------------|---------|
| `order.created` | New order received | `Order` + `LineItems` |
| `order.confirmed` | Order validated | Full `Order` object |
| `order.shipped` | Order shipped | `Order` + tracking |
| `stock.low` | Critical stock levels | `Stock[]` variations |
| `purchase.received` | Purchase received | `Purchase` + products |

## Setup

**`POST /v1/settings/webhooks`**
```bash
curl -X POST https://api.exowpee.com/v1/settings/webhooks \
  -H "Authorization: Bearer VOTRE_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://mon-app.com/webhooks",
    "events": ["order.created", "stock.low"],
    "secret": "whsec_123456"
  }'
```

## Security Headers

```
X-Webhook-Signature: sha256=abc123...
X-Webhook-ID: hook_456def
X-Webhook-Timestamp: 1643723400
```

## Verify Signature (Node.js)

```javascript
const crypto = require('crypto');

function verifySignature(payload, signature, secret) {
  const expected = crypto
    .createHmac('sha256', secret)
    .update(payload)
    .digest('hex');
  
  return crypto.timingSafeEqual(
    Buffer.from(signature), 
    Buffer.from(expected)
  );
}
```

## Retry Policy
- **3s** delivery target
- **5 retries** (30s → 5min → 15min → 1h → 3h)
- **24h TTL** max

