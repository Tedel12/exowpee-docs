## Overview

The Customer module is dedicated to managing all information related to your clients (end customers who buy from you). Its main purpose is to create, update, view, and organize customer profiles, including personal details, contact information, addresses, purchase history, and any custom notes. This module acts as the central place for customer data, making it easy to associate clients with orders, track their buying behavior, and provide personalized service.

For complete beginners: Imagine you run a shop. When someone buys something, you need to know who they are (name, phone, email, address) so you can deliver, invoice, or follow up later. The Customer module is your "address book" for buyers. It lets you add new customers when they buy for the first time, update their info if they move or change phone number, and see their past orders. This is crucial for loyalty programs, credit sales, or delivery.

- **Key Objectives**:
  - Store and manage complete customer profiles in one place.
  - Link customers to orders (who bought what, when, and how much).
  - Support credit sales (customers who pay later).
  - Keep track of customer history (orders, returns, notes).
  - Ensure data privacy and multi-tenant isolation (each company sees only its own customers).
  - Provide quick search and filtering for sales teams.

For beginners: You start by creating a customer profile (name + phone is often enough). Then, when creating an order (in ORDER module), you select this customer. The system automatically links the order to the customer. Later, you can see all orders for that customer in one place. It's simple but powerful for small shops or large businesses.

- **How it Fits in Exowpee**:
  - **IAM**: Controls who can create/view/edit customers (permissions like view_customers, create_customer).
  - **ORDER**: Uses customer_id to associate orders with clients.
  - **CATALOG**: Indirectly linked – customers buy products from catalog.
  - **LEDGER**: Records credit sales or payments from customers.
  - Multi-tenant: All customers are scoped to your current company (from your JWT token).

- **Why It's Important for Developers**:
  - Customer IDs are Ksuid strings (27 characters, e.g., "39WSvi21oTnZN8i028Y80FTNT1x").
  - Data is isolated per company – no risk of seeing another company's customers.
  - The module supports basic CRUD (Create, Read, Update, Delete) operations.
  - Beginners: Don't worry about Ksuid – the system generates them automatically when you create a customer.


**Common permissions for Customer:**
- `view_customers` : List and view customer details and history.
- `create_customer` : Add new customers.
- `update_customer` : Edit existing customer info (name, phone, address, etc.).
- `delete_customer` : Remove a customer profile (usually restricted).
- `view_customer_history` : See past orders and credit info.

**Example roles:**
- **Admin** : All permissions (view, create, update, delete).
- **Sales Manager** : view_customers, create_customer, update_customer.
- **Sales User** : view_customers, create_customer (e.g., add a new customer during a sale).
- **Cashier** : view_customers only (to check if a customer exists for credit sale).

## Endpoints

The Customer module has 4 main routes (CRUD operations). All endpoints are protected and require Bearer JWT token. They are scoped to the current company.


**Link to API Reference** : See [API Reference > Customer](/api-reference) for technical details.

## Examples of Use

Let's go through each endpoint step by step with full cURL examples, explanations, and what every property means. Assume you are authenticated (Bearer token from IAM). We’ll explain why each field matters and what to do if something goes wrong.

### Example: List Customers (GET /v1/customer)

This endpoint shows all customers in your current company. It's useful for seeing who your clients are, searching for someone, or checking how many customers you have.

**Required** : Nothing – just the token in the header.

**Optional** :
- ?search=ben : Search by name, email, or phone.
- ?page=2 : Go to page 2 (pagination).
- ?limit=10 : Show 10 customers per page.

cURL example (basic list):
```bash
curl -X GET "http://localhost:8000/v1/customer" \
  -H "Authorization: Bearer <your_token>"
```

cURL example with search:
```bash
curl -X GET "http://localhost:8000/v1/customer?search=ben" \
  -H "Authorization: Bearer <your_token>"
```

**Expected Response (200 OK)** :
```json
{
  "data": [
    {
      "id": "39WSvi21oTnZN8i028Y80FTNT1x",
      "name": "Ben Client",
      "email": "ben.client@example.com",
      "phone": "+22912345678",
      "address": "Rue des Marchands, Cotonou, Benin",
      "created_at": "2026-02-10T10:15:00Z",
      "updated_at": "2026-02-11T14:30:00Z"
    },
    {
      "id": "39XabcdeFgHijKlMnOpQrStUvWx",
      "name": "Marie Shop",
      "email": "marie@shop.bj",
      "phone": "+22998765432",
      "address": "Fidjrossè, Cotonou",
      "created_at": "2026-02-12T09:00:00Z",
      "updated_at": "2026-02-12T09:00:00Z"
    }
  ],
  "meta": {
    "current_page": 1,
    "last_page": 1,
    "per_page": 15,
    "total": 2
  }
}
```

**Explanation of Response Properties** :
- **data** : Array of customer objects. Each customer has:
  - **id** : Unique Ksuid (27 characters). Use this in orders (customer_id) or to get details (GET /v1/customer/{id}).
  - **name** : Full name or company name of the customer.
  - **email** : Email address (optional but useful for receipts).
  - **phone** : Phone number (often required for delivery or contact).
  - **address** : Physical address (very important for delivery).
  - **created_at** / **updated_at** : Timestamps when the customer was created or last edited.
- **meta** : Pagination info:
  - **current_page** : Page you're viewing.
  - **last_page** : Total pages.
  - **per_page** : Items per page.
  - **total** : Total number of customers in your company.

**What This Does** : The server fetches all customers from the database, filtered by your current company_id (from token). It applies any search or pagination and returns a paginated list.

**Advanced Notes** : Supports sorting (?sort=name) and filtering (?email=example.com). For large customer bases, always use pagination.

**Link to API Reference** : See [API Reference > Customer](/api-reference) for technical details.

**Advanced Notes** : No full replacement – only changed fields are updated. Audit trail possible (log changes).

## Was this page helpful?

Your feedback helps us improve the documentation.

<div style={{ display: 'flex', gap: '16px', marginTop: '16px' }}>
  <button
    onClick={() => {
      document.getElementById('feedback-yes-message').style.display = 'block';
      document.getElementById('feedback-no-message').style.display = 'none';
      setTimeout(() => {
        document.getElementById('feedback-yes-message').style.display = 'none';
      }, 4000);
    }}
    style={{
      padding: '10px 24px',
      color: '#16A34A',
      border: 'none',
      borderRadius: '8px',
      cursor: 'pointer',
      fontWeight: '600',
      fontSize: '15px',
    }}
  >
    Yes
  </button>

  <button
    onClick={() => {
      document.getElementById('feedback-no-message').style.display = 'block';
      document.getElementById('feedback-yes-message').style.display = 'none';
      setTimeout(() => {
        document.getElementById('feedback-no-message').style.display = 'none';
      }, 4000);
    }}
    style={{
      padding: '10px 24px',
      color: '#e53e3e',
      border: 'none',
      borderRadius: '8px',
      cursor: 'pointer',
      fontWeight: '600',
      fontSize: '15px',
    }}
  >
    No
  </button>
</div>

{/* Message Yes */}
<div 
  id="feedback-yes-message" 
  style={{ 
    display: 'none', 
    marginTop: '20px', 
    padding: '12px 20px', 
    backgroundColor: '#000702d6', 
    borderRadius: '8px', 
    border: 'none', 
    color: '#16A34A', 
    fontSize: '15px', 
    fontWeight: '500',
    textAlign: 'center'
  }}
>
  Thank you! We're glad this helped
</div>

{/* Message No */}
<div 
  id="feedback-no-message" 
  style={{ 
    display: 'none', 
    marginTop: '20px', 
    padding: '12px 20px', 
    backgroundColor: '#130101', 
    borderRadius: '8px', 
    border: 'none', 
    color: '#991b1b', 
    fontSize: '15px', 
    fontWeight: '500',
    textAlign: 'center'
  }}
>
  Thanks for the feedback — we'll improve it!
</div>
```