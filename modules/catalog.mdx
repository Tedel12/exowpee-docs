# Overview

The Catalog module is the heart of the Exowpee platform for handling product inventories and related data. Its primary purpose is to provide a comprehensive system for managing products, categories, product variants (such as different sizes, colors, or configurations), pricing per variant, vendors (suppliers or sellers), locations (physical storage or store places like warehouses or shops), and purchases (procurement from vendors). This module ensures that businesses can organize their inventory in a structured way, track stock levels, and integrate with other modules for seamless operations like sales and accounting.

Let's break this down for beginners: Imagine you're running a store selling phones. The Catalog module lets you create "categories" like "Smartphones" or "Accessories". Then, you add "products" like "Samsung Galaxy A54", which can have "variants" (e.g., black color with 128GB storage vs. white with 256GB). You can set different "prices" for each variant (e.g., wholesale price, retail price). You also manage "vendors" (who supply the phones), "locations" (where you store them, like "Main Warehouse" or "Cotonou Store"), and "purchases" (buying new stock from vendors, which updates your inventory automatically).

- **Key Objectives**:
  - Organize products into categories for easy navigation and search.
  - Handle complex product variations to support diverse inventory (e.g., clothing with sizes and colors).
  - Manage pricing flexibly, including multiple price points per variant (e.g., standard price, promotional price).
  - Track vendors to maintain supplier relationships and purchase history.
  - Define locations for multi-site inventory management (e.g., track stock per store).
  - Process purchases to add stock, update costs, and integrate with accounting.
  - Ensure multi-tenant support, where each company has its own isolated catalog.

For beginners: If you're new to APIs or inventory systems, think of Catalog as your "product database". You start by building the structure (categories, locations, vendors), then add items (products and variants), and finally handle incoming stock (purchases). This module is essential before using ORDER for sales, as orders pull from catalog stock. It's designed to be scalable – a small shop can use it for basic products, while a large enterprise can handle thousands of variants.

- **How it Fits in Exowpee**: Catalog integrates with IAM for permission checks (e.g., who can create products), ORDER for selling products (stock decreases on sale), CUSTOMER for associating purchases with clients (though mainly vendor-focused), and LEDGER for recording purchase costs as accounting entries. It's multi-tenant, meaning data is scoped to your current company (from your JWT token).

- **Why It's Important for Developers**: This module uses Ksuid IDs (27-character strings like "39WSvi21oTnZN8i028Y80FTNT1x") for all entities, ensuring uniqueness in distributed systems. It supports tracked inventory (stock levels) and non-tracked items. Beginners: Don't worry about Ksuid – they're auto-generated; just use them in paths or bodies.

## Roles & Permissions (RBAC)

The Catalog module relies on IAM's RBAC system to control who can access and modify catalog data. Permissions are granular, allowing fine-tuned control (e.g., allow viewing but not editing). Roles are predefined groups of permissions, but you can customize via IAM.

- **Roles** : Typical setups include "Admin" (full control), "Inventory Manager" (create/update stock), "Sales User" (view only). You can create custom roles in IAM (see IAM module for POST /v1/auth/roles).
- **Permissions** : Specific actions, scoped to the user's company (multi-tenant). For example, a permission like "create_product" allows adding products only in your current company.

Example roles and their permissions for Catalog:
- **Admin** : Full access – all permissions below (create, update, delete, view).
- **Inventory Manager** : Can create/update/delete products, variants, prices, vendors, locations, and purchases (e.g., manage stock inflows).
- **Sales User** : Limited to view-only (list products, categories, stock levels) for checking availability during sales.
- **Vendor** : View-only for their own purchases and products supplied (custom permission).

Granular permissions list for Catalog:
- `view_catalog` : List categories, products, variants, prices, vendors, locations, purchases (basic read access).
- `create_product` : Add new products, variants, categories.
- `update_product` : Edit existing products, variants, prices.
- `delete_product` : Remove products or variants (with checks for stock dependencies).
- `manage_vendors` : Create/update/delete vendors (suppliers).
- `manage_locations` : Create/update/delete locations (stores/warehouses).
- `manage_purchases` : Create purchases (add stock from vendors), view purchase history.
- `view_stock` : See stock levels per location (integrated with tracked inventory).

For beginners: Permissions prevent unauthorized actions. For example, a sales user can see product details (view_catalog) but can't change prices (needs update_product). To check your permissions, use GET /v1/auth/me after login – it lists your current array of permissions. If you get a 403 Forbidden error on an endpoint, it means you lack the required permission; ask an admin to add it via IAM (update your profile with extra_permissions).

For developers: Permissions are checked server-side in Laravel middleware. Custom permissions can be added in code (config/permissions.php). In multi-tenant, permissions are per-profile (per company) – switch profiles to change.

## Endpoints

The Catalog module has 15+ routes for managing categories, products, variants, prices, vendors, locations, and purchases. Below is a detailed table. All endpoints are protected and require Bearer JWT token (from IAM login). They are scoped to the user's current company_id. Use Ksuid IDs for paths (e.g., /v1/catalog/products/39WSvi21oTnZN8i028Y80FTNT1x).

| Method | URL | Description | Required Params / Body | Example Response | Required Permissions |
| --- | --- | --- | --- | --- | --- |
| GET | `/v1/catalog/categories` | List categories | `?sort=title` (optional) | `{"data": [{"id": "39W...", "title": "Smartphones"}]}` | `view_catalog` |
| POST | `/v1/catalog/categories` | Create category | `{"title": string, "handle": string, "sort_order": int}` | `{"id": "39W...", "title": "Smartphones"}` | `create_product` |
| GET | `/v1/catalog/products` | List products | `?status=published` (optional) | `{"data": [{"id": "39W...", "title": "Samsung Galaxy A54"}]}` | `view_catalog` |
| POST | `/v1/catalog/products` | Create product | `{"title": string, "type": string, "is_tracked": bool, "variants": array}` | `{"id": "39W...", "title": "Samsung Galaxy A54"}` | `create_product` |
| GET | `/v1/catalog/products/{id}` | Get product details | `id` (Ksuid) | `{"id": "39W...", "title": "Samsung Galaxy A54", "variants": array}` | `view_catalog` |
| PUT | `/v1/catalog/products/{id}` | Update product | `{"title": string, "status": string}` | `{"id": "39W...", "title": "Updated Product"}` | `update_product` |
| DELETE | `/v1/catalog/products/{id}` | Delete product | `id` (Ksuid) | `204 No Content` | `delete_product` |
| GET | `/v1/catalog/products/{product}/variants` | List variants | `product` (Ksuid) | `[{"id": string, "sku": "SM-A546B", "price": 185000}]` | `view_catalog` |
| POST | `/v1/catalog/products/{product}/variants` | Add variant | `{"sku": string, "price": int, "status": "active"}` | `{"id": string, "sku": "SM-A546B"}` | `create_product` |
| PUT | `/v1/catalog/variation/{id}` | Update variant | `{"name": string, "sku": string, "price": int}` | `{"id": string, "sku": "Updated SKU"}` | `update_product` |
| GET | `/v1/catalog/vendors` | List vendors | None | `[{"id": string, "name": "Samsung Supplier"}]` | `view_catalog` |
| POST | `/v1/catalog/vendors` | Create vendor | `{"name": string, "email": string, "phone": string}` | `{"id": string, "name": "New Vendor"}` | `manage_vendors` |
| GET | `/v1/catalog/locations` | List locations | None | `[{"id": string, "name": "Main Warehouse"}]` | `view_catalog` |
| POST | `/v1/catalog/locations` | Create location | `{"name": string, "address": string, "is_active": bool}` | `{"id": string, "name": "New Location"}` | `manage_locations` |
| GET | `/v1/catalog/purchases` | List purchases | None | `[{"id": string, "total": 185000}]` | `manage_purchases` |
| POST | `/v1/catalog/purchases` | Create purchase | `{"vendor_id": string, "products": array}` | `{"id": string, "total": 185000}` | `manage_purchases` |
| POST | `/v1/catalog/purchases/{id}/partial` | Partial delivery | `{"products": array}` | `{"id": string, "status": "partial"}` | `manage_purchases` |

**Lien vers API Reference** : See [API Reference > Catalog](/api-reference/catalog) for technical details.

## Examples of Use

Let's dive into using the Catalog module step by step, as if you're a new developer or business owner setting up your inventory for the first time. We'll use cURL examples, but feel free to use Postman (import your openapi.json as a collection for easy testing). Assume you're authenticated (Bearer token from IAM login). We'll explain every property, what it does, why it's required, and common pitfalls.

### Example 1: Create a Category (POST /v1/catalog/categories)

Categories are groups for products (e.g., "Electronics" or "Clothing"). This endpoint creates one. It's the first step in organizing your catalog. Without categories, products are harder to search or filter.

**Required** :
- title: Human-readable name of the category (string, e.g., "Smartphones"). Required because it's the display name in the UI.
- handle: Slug for URLs or identifiers (string, e.g., "smartphones"). Required, must be unique per company to avoid conflicts.

**Optional** :
- sort_order: Integer for ordering categories (e.g., 1 for top position).

cURL example:
```bash
curl -X POST "http://localhost:8000/v1/catalog/categories" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer <your_token>" \
  -d '{
    "title": "Smartphones",
    "handle": "smartphones",
    "sort_order": 1
  }'
```

**Expected Response (201 Created)** :
```json
{
  "id": "39WgVV5nQL8KpD8LldXsHnUKkrW",
  "title": "Smartphones",
  "handle": "smartphones",
  "sort_order": 1,
  "created_at": "2026-02-12T16:30:00Z",
  "updated_at": "2026-02-12T16:30:00Z"
}
```

**Explanation of Response Properties** :
- **id**: The unique Ksuid (27-character string) assigned to the category. Use this ID to associate with products (e.g., in "categories" array).
- **title**: The name you provided, echoed back for confirmation.
- **handle**: The slug you provided, confirmed unique.
- **sort_order**: The ordering value you set (or default 0 if omitted).
- **created_at**: Timestamp when the category was created (ISO format).
- **updated_at**: Timestamp of last update (initially same as created_at).

**What This Does** : The server validates the handle is unique in your company, creates the category in the database, and returns it. Categories are company-scoped (multi-tenant), so no overlap between companies.

**Beginner Tips** :
- Start with categories before products – it's like creating folders before files.
- Test in Postman: Set body to JSON, send, and copy the id for next steps.
- Common error: 400 Validation error – handle must be unique (check with GET /v1/catalog/categories first). If 403 Forbidden, you need "create_product" permission.

**Advanced Notes** : Handles are used for SEO-friendly URLs in e-commerce integrations. Sort_order affects display in lists. Integrate with search for filtering.

### Example 2: List Categories (GET /v1/catalog/categories)

This endpoint returns all categories in your current company. It's useful for dropdowns in UIs or checking what's available before adding products.

**Required** :
- No body or required params – just the token.

**Optional** :
- Query params: ?sort=title (sort by title), ?limit=10 (pagination).

cURL example:
```bash
curl -X GET "http://localhost:8000/v1/catalog/categories" \
  -H "Authorization: Bearer <your_token>"
```

**Expected Response (200 OK)** :
```json
{
  "data": [
    {
      "id": "39WgVV5nQL8KpD8LldXsHnUKkrW",
      "title": "Smartphones",
      "handle": "smartphones",
      "sort_order": 1,
      "created_at": "2026-02-12T16:30:00Z",
      "updated_at": "2026-02-12T16:30:00Z"
    }
  ],
  "meta": {
    "current_page": 1,
    "last_page": 1,
    "per_page": 15,
    "total": 1
  }
}
```

**Explanation of Response Properties** :
- **data**: Array of category objects (each with id, title, handle, sort_order, timestamps).
- **meta**: Pagination info – current_page (current page number), last_page (total pages), per_page (items per page), total (total categories).

**What This Does** : The server fetches categories from the database, scoped to your company_id from the token, applies any query filters, and returns paginated results.

**Beginner Tips** :
- Use this to get category IDs for creating products (in "categories" array).
- Test in Postman: Simple GET, check "data" for IDs.
- Common error: 403 Forbidden – need "view_catalog" permission. Empty array? Create categories first.

**Advanced Notes** : Supports pagination (use ?page=2). For large catalogs, use query filters like ? handle=smartphones.

### Example 3: Create a Product (POST /v1/catalog/products)

This endpoint creates a new product, including variants. It's the core action for adding inventory. Products can be "simple" (no variants) or "variable" (with variants like sizes/colors).

**Required** :
- title: Name of the product (string, e.g., "Samsung Galaxy A54").
- type: "simple" or "variable" (string).
- is_tracked: Boolean – true if you want to track stock levels.
- handle: Unique slug (string, e.g., "samsung-galaxy-a54").
- status: "draft" or "published" (string).
- variants: Array of variant objects (at least one for simple, multiple for variable).

**Optional** :
- description: Product description (string).
- tags: Comma-separated tags (string, e.g., "android,5g").
- vendor_id: Ksuid of vendor (string).
- categories: Array of category Ksuids (`array<string>`).


For variants array (each object):
- sku: Unique stock keeping unit (string, required).
- price: Sale price (number, required).
- cost: Purchase cost (number, optional).
- stock_quantity: Initial stock (number, optional if not tracked).
- status: "active" (string, required).
- options: Array of `{"name": string, "value": string}` for variants (optional).


cURL example (simple product with one variant):
```bash
curl -X POST "http://localhost:8000/v1/catalog/products" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer <your_token>" \
  -d '{
    "title": "Samsung Galaxy A54",
    "type": "simple",
    "is_tracked": true,
    "handle": "samsung-galaxy-a54",
    "status": "published",
    "description": "Mid-range 5G smartphone with great camera",
    "tags": "android,5g,samsung",
    "vendor_id": "39WSvi21oTnZN8i028Y80FTNT1x",
    "categories": ["39WgVV5nQL8KpD8LldXsHnUKkrW"],
    "variants": [
      {
        "sku": "SM-A546B-BLACK-128",
        "barcode": "8806094871234",
        "price": 185000,
        "cost": 150000,
        "stock_quantity": 20,
        "weight": 202,
        "weight_unit": "g",
        "status": "active",
        "options": [
          { "name": "Color", "value": "Black" },
          { "name": "Storage", "value": "128 GB" }
        ]
      }
    ]
  }'
```

**Expected Response (201 Created)** :
```json
{
  "id": "39Wl5y69NtOyiqQGYjEwg4zMRYD",
  "title": "Samsung Galaxy A54",
  "type": "simple",
  "is_tracked": true,
  "handle": "samsung-galaxy-a54",
  "status": "published",
  "description": "Mid-range 5G smartphone with great camera",
  "tags": "android,5g,samsung",
  "vendor_id": "39WSvi21oTnZN8i028Y80FTNT1x",
  "categories": ["39WgVV5nQL8KpD8LldXsHnUKkrW"],
  "variants": [
    {
      "id": "39XabcdeFgHijKlMnOpQrStUvWx",
      "sku": "SM-A546B-BLACK-128",
      "barcode": "8806094871234",
      "price": 185000,
      "cost": 150000,
      "stock_quantity": 20,
      "weight": 202,
      "weight_unit": "g",
      "status": "active",
      "options": [
        { "name": "Color", "value": "Black" },
        { "name": "Storage", "value": "128 GB" }
      ]
    }
  ],
  "created_at": "2026-02-12T16:30:00Z",
  "updated_at": "2026-02-12T16:30:00Z"
}
```

**Explanation of Response Properties** :
- **id**: Unique Ksuid for the product. Use this to update or add variants.
- **title**: The name you provided.
- **type**: "simple" or "variable" – determines if multiple variants are allowed.
- **is_tracked**: True if stock is monitored (stock_quantity changes with sales/purchases).
- **handle**: Unique slug for URLs or identifiers.
- **status**: "published" means visible in catalogs; "draft" for editing.
- **description**: Full text description.
- **tags**: Tags for search/filtering.
- **vendor_id**: Linked vendor Ksuid.
- **categories**: Array of category Ksuids.
- **variants**: Array of created variants, each with its own id, sku, price, cost, stock_quantity, weight, weight_unit, status, and options (key-value pairs for attributes like color).
- **created_at** / **updated_at**: Timestamps for auditing.

**What This Does** : The server validates uniqueness (handle, sku per company), creates the product and variants in the database, links to categories/vendors, and initializes stock if tracked. It's atomic – if one variant fails, the whole creation rolls back.

**Beginner Tips** :
- For simple products, one variant is enough (default).
- Test in Postman: Use collection from openapi.json, fill body, send. Copy id and variant ids for updates.
- Common error: 400 Validation error – sku unique, categories exist. 403 – need "create_product". If stock_quantity > 0, it sets initial stock.

**Advanced Notes** : For variable products, add multiple variants. Prices can be multi-tier (e.g., retail/wholesale via custom fields). Integrates with stock tracking – purchases add to stock_quantity. Use barcode for scanning apps.

### Example 4: List Products (GET /v1/catalog/products)

This endpoint returns all products in your current company, with pagination. It's useful for dashboards, search, or inventory checks.

**Required** :
- No body or required params.

**Optional** :
- Query params: ?status=published (filter by status), ?page=2 (pagination), ?limit=20 (items per page), ?sort=title (order by title).

cURL example:
```bash
curl -X GET "http://localhost:8000/v1/catalog/products" \
  -H "Authorization: Bearer <your_token>"
```

**Expected Response (200 OK)** :
```json
{
  "data": [
    {
      "id": "39Wl5y69NtOyiqQGYjEwg4zMRYD",
      "title": "Samsung Galaxy A54",
      "type": "simple",
      "status": "published",
      "variants": [ { "id": string, "sku": "SM-A546B-BLACK-128" } ]
    }
  ],
  "meta": {
    "current_page": 1,
    "last_page": 1,
    "per_page": 15,
    "total": 1
  }
}
```

**Explanation of Response Properties** :
- **data**: Array of product objects (each with id, title, type, is_tracked, handle, status, description, tags, vendor_id, categories, variants array, timestamps).
- **meta**: Pagination details – current_page, last_page, per_page, total (number of products).

**What This Does** : Fetches products from the database, scoped to your company, applies filters/pagination, and returns them. Variants are included for full details.

**Beginner Tips** :
- Use ?status=draft to see unpublished products.
- Test in Postman: GET request, add query params in the "Params" tab.
- Common error: 403 – need "view_catalog". Empty data? Create products first.

**Advanced Notes** : Supports advanced filters (e.g., ?tags=android). For large inventories, use pagination to avoid loading everything.

And so on for the other examples (I can continue with Update Product, Create Variant, etc., but since you asked to go module by module, tell me if you want more examples for Catalog or move to Customer).

## Was this page helpful?

Your feedback helps us improve the documentation.

<div style={{ display: 'flex', gap: '16px', marginTop: '16px' }}>
  <button
    onClick={() => {
      document.getElementById('feedback-yes-message').style.display = 'block';
      document.getElementById('feedback-no-message').style.display = 'none';
      setTimeout(() => {
        document.getElementById('feedback-yes-message').style.display = 'none';
      }, 4000);
    }}
    style={{
      padding: '10px 24px',
      color: '#16A34A',
      border: 'none',
      borderRadius: '8px',
      cursor: 'pointer',
      fontWeight: '600',
      fontSize: '15px',
    }}
  >
    Yes
  </button>

  <button
    onClick={() => {
      document.getElementById('feedback-no-message').style.display = 'block';
      document.getElementById('feedback-yes-message').style.display = 'none';
      setTimeout(() => {
        document.getElementById('feedback-no-message').style.display = 'none';
      }, 4000);
    }}
    style={{
      padding: '10px 24px',
      color: '#e53e3e',
      border: 'none',
      borderRadius: '8px',
      cursor: 'pointer',
      fontWeight: '600',
      fontSize: '15px',
    }}
  >
    No
  </button>
</div>

{/* Message Yes */}
<div 
  id="feedback-yes-message" 
  style={{ 
    display: 'none', 
    marginTop: '20px', 
    padding: '12px 20px', 
    backgroundColor: '#000702d6', 
    borderRadius: '8px', 
    border: 'none', 
    color: '#16A34A', 
    fontSize: '15px', 
    fontWeight: '500',
    textAlign: 'center'
  }}
>
  Thank you! We're glad this helped
</div>

{/* Message No */}
<div 
  id="feedback-no-message" 
  style={{ 
    display: 'none', 
    marginTop: '20px', 
    padding: '12px 20px', 
    backgroundColor: '#130101', 
    borderRadius: '8px', 
    border: 'none', 
    color: '#991b1b', 
    fontSize: '15px', 
    fontWeight: '500',
    textAlign: 'center'
  }}
>
  Thanks for the feedback — we'll improve it!
</div>

```